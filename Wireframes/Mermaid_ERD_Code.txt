erDiagram
    USER ||--o{ JOURNAL_ENTRY : creates
    USER ||--o{ USER_PREFERENCE : has
    USER ||--o{ USER_SESSION : has
    JOURNAL_ENTRY ||--o{ TAG : contains
    JOURNAL_ENTRY ||--o{ ENTRY_ATTACHMENT : has
    USER ||--o{ PIN_ATTEMPT : records
    TAG ||--o{ TAG_CATEGORY : belongs_to
    
    USER {
        int Id PK
        string Username UK
        string Email UK
        string PasswordHash
        string Pin
        datetime CreatedAt
        datetime LastLoginAt
        boolean IsActive
    }
    
    JOURNAL_ENTRY {
        int Id PK
        int UserId FK
        string Title
        string Content
        date Date UK
        datetime CreatedAt
        datetime UpdatedAt
        enum PrimaryMood
        enum SecondaryMood1
        enum SecondaryMood2
        enum Category
        boolean IsFavorite
        string ImagePath
        int WordCount
    }
    
    TAG {
        int Id PK
        string Name UK
        string Color
        datetime CreatedAt
        int CategoryId FK
    }
    
    TAG_CATEGORY {
        int Id PK
        string Name
        string Description
    }
    
    ENTRY_ATTACHMENT {
        int Id PK
        int EntryId FK
        string FileName
        string FilePath
        string FileType
        long FileSize
        datetime UploadedAt
    }
    
    USER_PREFERENCE {
        int Id PK
        int UserId FK UK
        enum ThemeMode
        boolean EnableNotifications
        boolean EnableStreakReminder
        string ReminderTime
        int ReminderDaysOfWeek
        string Language
        boolean PrivateMode
        datetime UpdatedAt
    }
    
    USER_SESSION {
        int Id PK
        int UserId FK
        string SessionToken UK
        string DeviceName
        string IPAddress
        enum DeviceType
        datetime CreatedAt
        datetime LastActiveAt
        datetime ExpiresAt
        boolean IsActive
    }
    
    PIN_ATTEMPT {
        int Id PK
        int UserId FK
        string EnteredPin
        boolean IsCorrect
        datetime AttemptedAt
        string DeviceInfo
    }
